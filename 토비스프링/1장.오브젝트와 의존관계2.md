#### 애플리케이션 컨텍스트의 동작방식
애플리케이션 컨텍스트는 애플리케이션에서 IOC를 적용해서 관리할 모든 오브젝트에 대한 생성과 관계설정을 담당한다.
대신 직접전으로 DaoFactory와 관계를 맺어주는 코드는 따로 없고 그런 생성정보와 연관관계 정보를 별도의 설정정보를 통해 얻는다. 때로는 외부의 오브젝트 펙토리에 그 작업을 위임하고 그 결과를 가져다가 사용하기도 한다.
TODO: 관계설정 UML다이어그램 필요

#### 애플리케이션 컨텍스트의 장점
- 클라이언트는 구체적인 팩토리 클래스를 알 필요가 없다.
    - 다양한 오브젝트가 생기더라도 이를 일일이 알 필요없이 애플리케이션 컨텍스트를 이용하여 일관된 방식으로 원하는 오브젝트를 가져올 수 있다.
- 애플리케이션 컨텍스트는 종합 IOC 서비스를 제공해준다.
    - 단순히 생성과 관계설정의 제공뿐 아니라 만들어지는 방식, 시점과 전략, 자동생성, 후처리, 정보의 조합, 설정방식의 다변화 등 다양한 부가기능을 제공한다.
- 애플리케이션 컨텍스트는 빈을 검색하는 다양한 방법을 제공한다.

#### 스프링 IOC의 용어 정리
- 빈: 스프링이 IOC방식으로 관리하는 오브젝트라는 뜻이다. 주의할 점은 만들어지는 모든 오브젝트가 빈은 아니다. 그중에서 스프링이 직접 그 생성과 제어를 담당하는 오브젝트만을 빈이라 한다.
- 빈 팩토리: 스프링의 IOC를 담당하는 핵심 컨테이너를 가리킨다. 빈을 등록하고, 생성하고, 조회하고, 돌려주고 등 부가적인 빈을 관리하는 기능을 담당한다.
- 애플리케이션 컨텍스트
    - 빈 팩토리를 확장한 IOC 컨테이너다. 빈을 등록하고 관리하는 기본적인 기능은 빈 펙토리와 비슷하다. 여기에 각종 부가 서비스를 추가로 제공한다.
    - 스프링이 제공하는 애플리케이션 지원 기능을 모두 포함해서 이야기하는 것이다.
    - ApplicationContext는 BeanFactory를 상속한다.
- 설정정보/설정 메타정보: 애플리케이션 컨텍스트 or 빈 팩토리가 IOC를 적용하기 위해 사용하는 메타정보를 말한다.(configuration)
- 컨테이너 or IOC컨테이너: IOC방식으로 빈을 관리한다는 의미. 애플리케이션 컨텍스트 오브젝트는 하나의 애플리케이션에서 보통 여러 개가 만들어져 사용되는데 이를 통틀어서 스프링 컨테이너라고 부를 수 있다.
- 스프링 프레임워크: IOC 컨테이너, 애플리케이션 컨텍스트를 포함해서 스프링이 제공하는 모든 기능을 통틀어 말할 때 주로 사용한다.

### 1.6 싱글톤 레지스트리와 오브젝트 스코프
> **오브젝트의 동일성과 동등성**: 자바에서 두 개의 오브젝트가 동일한 오브젝트라 하는 것은 == 연산자로 완전히 같음을 얘기한다. 동등하다고 얘기하는 것은 equals() 메소드를 이용해 비교한다.
두 개의 오브젝트가 동일하지는 않지만 동등한 경우는 각각 다른 메모리상에 존재하는 것이다.

- 기존의 DaoFactory의 userDao() 메소드를 두 번 호출해서 리턴되는 오브젝트와 빈으로 userDao()를 가져오는 차이점은 무엇일까?
- 그 차이점은 동일성에 있다. 아래 코드를 보자.
```java
DaoFactory factory = new DaoFactory();
UserDao dao1 = factory.userDao();
UserDao dao2 = factory.userDao();

System.out.println(dao1); //springbook.dao.UserDao@11
System.out.println(dao2); //springbook.dao.UserDao@22
```
```java
ApplicationContext context = new AnnotationConfigApplicationContext(DaoFactory.class);
UserDao dao3 = context.getBean("UserDao", UserDao.class);
UserDao dao4 = context.getBean("UserDao", UserDao.class);

System.out.println(dao3); //springbook.dao.UserDao@33
System.out.println(dao4); //springbook.dao.UserDao@33
```
- 차이점이 느껴지는가? 빈을 통해 가져오는 방식은 새로운 객체를 생성하지 않고 동일한 객체를 가져온다.

#### 싱글콘 레지스트리로서의 애플리케이션 컨텍스트
애플리케이션 컨텍스트는 싱글톤을 저장하고 관리하는 **싱글톤 레지스트리**이다. 스프링은 별다른 설정을 하지 않으면 기본적으로 싱글톤으로 만든다. 왜 스프링은 싱글톤으로 빈을 만들까?
- 스프링이 주요 적용 대상이 자바 엔터프라이즈 기술을 사용하는 서버환경이기 때문이다.
- 하나의 요청을 처리하기 위해 데이터 액세스 로직, 서비스 로직, 비즈니스 로직 프레젠테이션 로직 등의 다양한 기능을 담당하는 보잡한 로직으로 이루어져 있다.
- 그런데 매번 클라이언트 요청이 올 때마다 새로운 오브젝트를 모두 만들어 내면 제아무리 성능이 뛰어난 가비지 컬렉션이 있더라도 서버의 부하는 피할 수 없다.
- 그래서 서비스 오브젝트라는 개념을 일찍부터 사용해 왔다.
- 이렇게 애플리케이션 안에 제한된 수 대개 한 개의 오브젝트만 만들어서 사용하는 것이 싱글톤 패턴의 원리다.
> **싱글톤 패턴**: GOF 소개한 디자인패턴의 하나이다. 가장 많이 활용되기도 하지만 비판을 받는 패턴이다. 싱글톤 패턴은 어떤 클래스를 애플리케이션 내에서 제한된 인스턴스 개수 이름처럼 주로 하나만 존재하도록 강제하는 패턴이다.

#### 싱글톤 패턴의 한계
