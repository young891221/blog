# 테스트
스프링의 가장 중요한 가치를 무엇이냐고 질문한다면 그 가치는 객체지향과 테스트에 있다. 확장과 변화를 고려한 객체지향적 설계와 그것을 효과적으로 담아낼 수 있는 IOC/DI 같은 기술이라면, 만들어진 코드에 확신을 주고 변화에 유연하게 대처할 수 있는 자신감을 
주는 테스트 기술이 있다. 2장에서는 테스트란 무엇이며, 그 가치와 장점, 활용 전략, 스프링과의 관계를 살펴본다.

### 2.1 UserDaoTest 다시 보기
- 이전에는 main() 메소드를 이용해 UserDao 오브젝트의 함수를 호출하고 결과물을 출력함으로써 테스트를 수행하였다.
- 테스트란 결국 내가 예상했던 데로 코드가 정확히 동작하는지 확인해서, 내 코드에 대한 확신을 갖게 해주는 작업이다.
- 테스트에서 원치 않는 결함이 나오면 이를 제거해가는 작업, 일명 디버깅을 거치게 되고, 이를 통해 결함이 없는 코드를 만들어 나가는게 테스트이다.

#### 웹을 통한 DAO 테스트 방법의 문제점
보통의 웹 프로그래밍에서 DAO를 테스트하는 방법은 다음과 같다.
- DAO를 만든 뒤 바로 테스트하지 않고, 서비스 계층, MVC 프레젠테이션 계층까지 포함한 모든 입출력 기능을 대충이라도 만든다.
- 이렇게 만들어진 웹 애플리케이션을 서버에 배치한 뒤 웹 화면을 띄우고, 값을 직접 입력하며 테스트를 진행한다.
- 이상이 없으면 입력한 값을 화면에 출력해 주는 기능을 만들어서 또 다른 기능까지 확인해 본다.
`이런식의 테스트는 DAO, 서비스, 컨트롤러, 뷰 등 모든 레이어 기능을 다 만들고 나서야 테스트가 가능하다는게 가장 큰 문제이다.` 테스트를 하는 중에 에러가 나거나 과연 어디에서 문제가 일어났는지에 대한 수고도 필요하다. 단순히 에러 메시지와 호출 스택 정보만 
보고 간단히 원인을 찾을 수 없는 문제가 비일비재하다. 그렇다면 테스트를 어떻게 해야 효율적일수 있을까?

#### 작은 단위의 테스트
테스트하고자 하는 대상이 명확하다면 그 대상에만 집중해서 테스트하는 것이 바람직하다. 테스트는 가능하면 작은 단위로 쪼개서 집중해서 할 수 있어야 한다.
- UserDaoTest는 한 가지 관심에만 집중할 수 있게 작은 단위로 만들어진 테스트이다.
- 다른 작업 필요없이 간단하게 IDE나 도스창에서 테스트 수행이 가능하다.
- 엉뚱하게 JSP나 서블릿에서 에러가 발행해서 그것을 찾으려 시간낭비할 필요가 없다.
`이렇게 작은 단위로 테스트를 수행하는 것을 단위 **테스트**라 한다.`
- 여기서 말하는 단위는 크게 보자면 관리 기능을 모두 통틀어 하나의 단위로 볼 수도 있고, 작게 보자면 UserDao의 add()메소드 하나만을 단위라 생각할 수도 있다.
- 처음부터 긴 테스트를 한번에 수행하면 디버깅하는데 시간이 오래 걸릴수도 있고, 기능은 잘 잘동하지만 원치 않는 값일수도 있는 여러 이슈가 있다.
- 하지만, 작은 단위의 테스트를 수행하고 긴 테스트를 한다면 테스트 실패율이 줄어든고 디버깅 또한 훨씬 수월할 것이다.

#### UserDaoTest 문제점
- 수동 확인 작업의 번거로움
	- UserDaoTest는 수행과정과 입력 데이터의 준비를 모두 자동으로 진행하도록 만들어졌다.
	- 모든 결과는 콘솔에 출력하는데, 결국 콘솔에 나온 결과를 확인하는 건 사람의 책임이다.
	- 테스트 수행은 자동으로 진행되지만 결과를 확인하는 책임은 완전히 자동으로 테스트한다 할 수 없다.
- 실행 작업의 번거로움
	- 아무리 간단히 실행 가능한 main() 메소드라고 해도 DAO에 대한 작업이 확장되어 그것을 수백개 만들고 수백번 돌리는 것은 그만큼 수고스럽다.
	- 그래서 main()메소드보다 좀 더 편리하고 체계적으로 테스트하여 결과를 확인하는 방법이 필요하다.

### 2.2 UserDaoTest 개선


