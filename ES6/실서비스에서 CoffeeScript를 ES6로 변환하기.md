# 실서비스에서 CoffeeScript를 ES6로 변환하기
(@커피, 키보드 사진)
사내의 모바일웹 프로젝트가 coffeescript로 개발되어 있어 여러가지 불편을 겪었습니다. coffeescript로 개발하면서 단점은 다음과 같다고 생각했습니다. 
- 기존의 코드가 모듈화가 되어 있지 않았습니다.
- 그래서 의존 관계 파악이 어려웠고 유지보수, 기능 개발에 제한이 있었습니다.
- 개발 진행중 수정된 사항을 즉시 변환해 주는 컨버팅 도구(webpack, browsify)를 쓰고 있지 않아 개발진행이 느렸습니다.
- coffeescript의 장점이 있지만 러닝커브가 존재하였습니다. 그런데 별로 공부하고 싶은 마음이 들지 않는다는...
- 그래서 이 프로젝트를 맡게되는 사람마다 어려움을 겪게 됩니다.(다들 비슷하신가요...?)
- 무엇보다 커피의 카페인은 몸에 해롭습니다...하하핳

이러한 단점들 떄문에 청결한 프론트 환경을 구성하기 위해 Webpack + ES6를 도입하기로 하였습니다. 물론 이유도 있습니다.
- ES6는 대세이기 때문입니다.(여러 세미나와 Mozilla에 서의 서칭결과)
- 그래서 배우고 싶고 제가 배웠던걸 적용해 보고 싶었습니다.
- Webpack과 ES6는 찰떡궁합의 호흡을 자랑하며 개발 진행중에도 디버깅이 편리합니다.
- ES6의 모토중 하나가 ***다른 언어의 개발자들이 처음 사용하더라도 이해하기 쉽게 구성하는 것이기에 러닝커브가 상대적으로 줄어듭니다.***
- webpack의 Dependency Tree개념을 사용하여 의존관계를 형성할 수 있습니다.
- 기존의 코드를 모듈화하여 읽기 편한 직관적인 코드를 표현할 수 있습니다.
- 향후 React나 다른 프레임워크를 도입하기 수월합니다.

## 도입 절차
처음 설계는 제 사수분인 kingbbode님의 조언을 받아 함께 진행하게 되었습니다.
1)각 스크립트의 구조와 각각의 역할에 대해 분석하였습니다.
2)의존관계를 형성하여 모듈화된 구조를 설계하였습니다. 필요없는 스크립트도 파악하였습니다.
3)webpack 도입을 위한 스터디 진행하며 프로젝트내에 필요한 webpack의 기능들을 분석하였습니다.
4)CoffeeScript를 ES6로 변환하였습니다.(decaffeenate 사용)
5)변환된 스크립트 아름답게 구성하기
6)Router 도입하기
7)모듈화 시키기
8)의존성 연결하여 전역객체 삭제하기

### 1. 기존 스크립트 설계하기 
(@기존 디렉토리 구조 첨부)
(@프레젠테이션 7페이지)
(@프레젠테이션 9페이지)

### 2. Webpack 도입하기
(webpack 블로그 주소)

### 3. CoffeeScript 걷어내기
카페인은 몸에 해롭습니다. 해외의 개발자중 한 분이 이러한 사실에 대비하여 멋진 툴을 개발하여 놨습니다. 
[decaffeinate](https://www.npmjs.com/package/decaffeinate)를 사용하면 간편하게 CoffeeScript를 ES6로 변환해 줍니다. 기대했던 것보다 퀄러티 좋게 변환이 되어 놀랐습니다!
(@변형된 것중 잘 된 사진 - category)
(@일반적으로 변현된 사진)

### 4. ES6 아름답게 구성하기
여기서부터가 진짜 시작입니다. 미흡하게 변환되어진 코드를 모듈화하고 각각의 알맞는 함수를 사용해 주어야 합니다. ES6로 변환하면서 문제가 되는 점들을 적어보았습니다.
- 문제: 기존의 jquery click event가 사용이 안됐습니다.
	- 해결: click event를 arrow function으로 변경
- 문제: Array.from, includex, generator, promise...기타 등 ES6함수 중 IE에서 지원이 되지 않았습니다.(이부분은 실제처럼 마지막에 다 완성하고 실제 테스트해보니 안되었다고 쓰는게 좋을듯....)
	- 해결: 일단 해당 부분들을 호환이 되는 함수로 변환하였습니다.(모바일웹 환경이 IE와 동일한지 처음 알게 되었습니다.)
- 문제: 

